"use strict";var randomNum=function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor=function(t,e){var a=randomNum(t,e),r=randomNum(t,e),e=randomNum(t,e);return"rgb(".concat(a,", ").concat(r,", ").concat(e,")")},render=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=e.str,r=e.num,o=e.width,n=e.height,i=e.bgColor,l=e.fontColor,u=e.hasPoint,e=e.hasLine,m="";"function"==typeof t.setTextBaseline&&t.setTextBaseline("bottom"),t.setFillStyle(i||randomColor(180,240)),t.fillRect(0,0,o,n);for(var d=0;d<r;d++){var h=(o-10)/r*d+10,s=randomNum(n/2,n),c=randomNum(-45,45),v=a[randomNum(0,a.length)],f=randomNum(16,40),g=parseInt(n/2);m+=v,t.setFillStyle(l||randomColor(10,100)),t.setFontSize(g<f?g:f),t.translate(h,s),t.rotate(c*Math.PI/180),t.fillText(v,0,0),t.rotate(-c*Math.PI/180),t.translate(-h,-s)}if(e)for(var N=0;N<r;N++)t.setStrokeStyle(randomColor(90,180)),t.beginPath(),t.moveTo(randomNum(0,o),randomNum(0,n)),t.lineTo(randomNum(0,o),randomNum(0,n)),t.stroke();if(u)for(var p=0;p<10*r;p++)t.setFillStyle(randomColor(0,255)),t.beginPath(),t.arc(randomNum(0,o),randomNum(0,n),1,0,2*Math.PI),t.fill();return m};Component({properties:{str:{type:String,value:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"},num:{type:Number,value:6},width:{type:Number,value:120},height:{type:Number,value:40},bgColor:{type:String,value:""},fontColor:{type:String,value:""},hasPoint:{type:Boolean,value:!0},hasLine:{type:Boolean,value:!0},canvasId:{type:String,value:"wux-vcode"}},methods:{draw:function(){var t=this,e=this.data,a=e.width,r=e.height,e=e.canvasId;this.ctx=this.ctx||wx.createCanvasContext(e,this),this.ctx.clearRect(0,0,a,r);var o=render(this.ctx,this.data);this.ctx.draw(!1,function(){return t.triggerEvent("change",{value:o})})}},attached:function(){this.draw()},detached:function(){this.ctx=null}});